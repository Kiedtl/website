<!doctype html><html lang=en><link href=data:image/png, rel=icon type=image/png><title>./kiedtl</title><meta name=viewport content="width=device-width"><style>a{background:linear-gradient(to bottom,#cdcdcd,#cdcdcd) 50% calc(100% - 2px)/50% 2px no-repeat;color:#333;margin:-1px;text-decoration:none!important;-webkit-transition:all .35s ease-in-out;transition:all .35s ease-in-out}a:focus,a:hover{background-image:linear-gradient(to bottom,#777,#777);background-size:100% 3px;color:#111;-webkit-transition:all .35s ease-in-out!important;transition:all .35s ease-in-out!important}body{font-family:droid sans,sans-serif;line-height:1.6;color:#234;background-color:#f4f3f2;overflow-y:scroll;font-family:sans-serif}img,main{display:block;margin:25px auto}main{padding:20px;max-width:600px;line-height:1.6;word-wrap:break-word}img{max-width:100%}pre>code{display:block;padding:20px;white-space:pre-line}code{background:#eee;padding:2px}blockquote{border-left:7px solid #ddd;padding-left:14px;color:#666;margin:0}h1,h2,h3{font-family:monospace;line-height:1.2}</style><meta charset=utf-8><meta name=author content="Kied Llaentenn"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#f4f3f2><meta name=google-site-verification content=_Wt6XNMQUlHbi_wkIVeSwhekdKjuG3rmB1tYec-zu1c><link rel=stylesheet href=https://invisi-text.surge.sh/cdn/production/0.2.0/invisi-text.min.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98707492-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-98707492-3');</script><link href="https://fonts.googleapis.com/css?family=Lobster%7CDroid%20Sans" rel=stylesheet><main><a href=/>/root</a> &#8226; <a href=/blog/>/blog</a><h1 id=dynamic-i3-configurations>Dynamic <code>i3</code> Configurations</h1><p><em>2019-03-19</em><p>I’ve started using with Linux a weeks ago, and since then I’ve switched from KDE to GNOME to finally i3-gaps. I’ve customized and re-customized my bars and configs until it actually looks really nice. By dynamic, I mean that I use <code>pywal</code> to change the wallpaper/colors to something random on startup.<p><img src=https://user-images.githubusercontent.com/32681240/54638932-96470d00-4a62-11e9-8ea3-65d2fcafa72e.jpg><p><img src=https://user-images.githubusercontent.com/32681240/54639089-ed4ce200-4a62-11e9-8fed-0e91083718dd.jpg><h3 id=requirements>Requirements</h3><ul><li>admin rights<li>python 3+<li>polybar<li>i3 or i3-gaps<li>feh/nitrogen<li>a text editor, like <code>vim</code><li>some wallpapers<li>git</ul><p><strong>Note</strong>: this guide assumes that you already have a working polybar/i3 desktop set up.<h2 id=installing-pywal>Installing <code>pywal</code></h2><p>First, let’s install <code>pywal</code>. Run this in the terminal:<div class=sourceCode id=cb1><pre class="sourceCode bash"><code class="sourceCode bash"><a class=sourceLine id=cb1-1 title=1>$ <span class=fu>sudo</span> pip3 install pywal</a></code></pre></div><p>Make sure it installed properly:<div class=sourceCode id=cb2><pre class="sourceCode bash"><code class="sourceCode bash"><a class=sourceLine id=cb2-1 title=1>$ <span class=ex>wal</span> -v</a>
<a class=sourceLine id=cb2-2 title=2><span class=ex>wal</span> 3.3.0</a></code></pre></div><p>Now, just to try it out, type:<div class=sourceCode id=cb3><pre class="sourceCode bash"><code class="sourceCode bash"><a class=sourceLine id=cb3-1 title=1>$ <span class=ex>wal</span> -ei /path/to/wallpapers/</a></code></pre></div><p>If everything works out, you should get output similar to the following:<pre><code>[I] image: Using image space-023.jpg.
[I] theme: Set theme to _home_blah_Pictures_wallpapers_space-023_jpg_dark_None_None_1.1.0.json.
[I] colors: Found cached color scheme.
[I] wallpaper: Set the new wallpaper.
[I] sequences: Set terminal colors.


&lt;pywal prints color scheme here&gt;

[I] export: Exported all files.
[I] export: Exported all user files.
[I] reload: Reloaded environment.</code></pre><p>…and the background of your desktop should change to something random. The color scheme of your terminal should change also.<p>Now type <code>exit</code> and relaunch your terminal.<p>Uh…<p>You see, the terminal color scheme won’t be persisted and it will be reset to the default as soon as you close the terminal. To fix this, add this code to your <code>.bashrc</code>:<div class=sourceCode id=cb5><pre class="sourceCode bash"><code class="sourceCode bash"><a class=sourceLine id=cb5-1 title=1><span class=kw>(</span><span class=fu>cat</span> ~/.cache/wal/sequences <span class=kw>&amp;)</span></a>
<a class=sourceLine id=cb5-2 title=2><span class=bu>source</span> ~/.cache/wal/colors-tty.sh </a></code></pre></div><p>Now you can restart your terminal.<h2 id=configuring-i3>Configuring <code>i3</code></h2><p>Open your i3 configuration file in your editor:<pre><code>vim ~/.config/i3/config</code></pre><p>…and add this line to the bottom:<div class=sourceCode id=cb7><pre class="sourceCode ini"><code class="sourceCode ini"><a class=sourceLine id=cb7-1 title=1><span class=dt>exec --no-startup-id wal -i /path/to/wallpapers</span></a></code></pre></div><p>Now a new wallpaper will be randomly picked on startup. Glorious!<h2 id=configuring-polybar>Configuring <code>polybar</code></h2><p>This is by far the most complicated step and the easiest point to mess up on. This step can also be entirely different depending on how you configured polybar.<blockquote><h4 id=note><strong>NOTE</strong></h4><p>If you haven’t configured polybar yet, I highly recommend doing so now. Clone <a href=https://github.com/adi1090x/polybar-themes>this repository</a> somewhere and copy the contents of <code>polybar-3/</code> to where your polybar config is located. Delete or move your default polybar config, and then relaunch polybar by executing the following:<pre><code>$ chmod +x ./launch.sh # first time only
$ ./launch.sh</code></pre><p>You will have to modify your <code>i3</code> config to reflect these changes and launch polybar using this script instead of launching polybar directly.</blockquote><p>First, open the file in which the polybar colors are defined. In most normal configs, this will be located in <code>~/.config/polybar/config</code>, but if you followed the directions in the sidebar, it will be located in <code>~/.config/polybar/colors.ini</code>.<p>Next, modify the <strong>accent</strong>, <strong>background</strong>, and <strong>foreground</strong> colors so that it looks like this:<pre><code>background = ${xrdb:color0:#222}
foreground = ${xrdb:color7:#222}
accent = ${xrdb:color6:#222}</code></pre><hr><p>Now you are done! To reload <code>i3</code> and <code>polybar</code> and see the changes, run<pre><code>$ wal -i /path/to/wallpapers/</code></pre><p>Ahhhhh……<p><img src=https://user-images.githubusercontent.com/32681240/54638592-cc37c180-4a61-11e9-88d6-d682bb32e8ff.jpg><p><img src=https://user-images.githubusercontent.com/32681240/54638826-41a39200-4a62-11e9-8e19-2319567c41f3.jpg><p><img src=https://user-images.githubusercontent.com/32681240/54639036-ce4e5000-4a62-11e9-9ad9-216674d05863.jpg><hr><h3 id=sources>Sources:</h3><ul><li><strong><code>pywal</code></strong> - from <a href=https://github.com/dylanaraps/pywal/>here</a><li><strong><code>wallpapers</code></strong> - from <a href=https://wallhaven.cc/>Wallhaven</a></ul></main><a rel=license href=http://creativecommons.org/licenses/by-nc-nd/4.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png></a><script src=https://utteranc.es/client.js repo=kiedtl/website issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script>